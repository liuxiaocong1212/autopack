<!DOCTYPE HTML>
<html>

<head>
    <title>评论</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="applicable-device" content="mobile">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../core/css/base.css" media="screen" title="no title" charset="utf-8">
    <script type="text/javascript" src="../core/js/zepto.min.js"></script>
    <link rel="stylesheet" href="css/star_rated.css">
    
    <script src="js/star_rated.js"></script>
    <script>
        var width = document.querySelector('html').offsetWidth;
        var delta = (640 - 375) / (20 - 10);
        var fontSize = (width - 320) / delta + 10;
        if (width <= 375) {
            fontSize = 10;
        } else if (width >= 640) {
            fontSize = 20;
        }
        document.querySelector('html').style.fontSize = fontSize + 'px';
        window.addEventListener('resize', function() {
            var width = document.querySelector('html').offsetWidth;
            var delta = (640 - 375) / (20 - 10);
            var fontSize = (width - 320) / delta + 10;
            if (width <= 375) {
                fontSize = 10;
            } else if (width >= 640) {
                fontSize = 20;
            }
            document.querySelector('html').style.fontSize = fontSize + 'px';
        })
    </script>
    <style>
        .ui h1 {
            font-size: 3rem;
        }
        
        .ui h2 {
            font-size: 2rem;
            color: #999;
        }
        
        .ui h3 {
            background: #ccc;
            margin: 1rem 0;
            line-height: 3rem;
            padding-left: 1rem;
        }
        
        code {
            padding: 2px 4px;
            font-size: 90%;
            color: #c7254e;
            background-color: #f9f2f4;
            border-radius: 4px;
        }
        
        p.desc {
            margin-bottom: .5rem;
        }
        
        .star_bar{
            margin-top: 2rem;
        }

    </style>
</head>

<body>
    <div class="ui">
        <h1>星级评价打分</h1>
        <h2>ui/base/star_rated</h2>
        <br/>
        <p>1.通过字体图标实现；</p>
        <p>2.星级评价功能通过<code>data-score</code>接收数据信息，目前支持百分比，按照结构引入，通过js渲染；参数说明：<code>fontsize</code>控制星星大小，<code>color</code>控制星星颜色；</p>
        <p>3.星级打分参数说明：<code>fontsize</code>控制星星大小，<code>color</code>控制星星颜色；<code>onchange</code>打分之后回调；</p>
        <h3>星级评价</h3>
        <div class="star_bar" data-score="20%"></div>
        <div class="star_bar" data-score="80%"></div>
        <h3>星级打分</h3>
        <div class="star_comment_box">
            <div class="star_bar_score star_bar_score1">
                <i data-icon="&#x0046;"></i>
                <i data-icon="&#x0046;"></i>
                <i data-icon="&#x0046;"></i>
                <i data-icon="&#x0046;"></i>
                <i data-icon="&#x0046;"></i>
            </div>
            <p class="star_score"></p>
        </div>

        <div class="star_bar_score star_bar_score2">
            <i data-icon="&#x0046;"></i>
            <i data-icon="&#x0046;"></i>
            <i data-icon="&#x0046;"></i>
            <i data-icon="&#x0046;"></i>
            <i data-icon="&#x0046;"></i>
        </div>
        
    </div>
    <script>
        $(function() {
            $(".star_bar_score1").starScore({
                onchange: function($el,index) {
                    console.log("点击了第" + index + "个星星");
                    console.log($el)
                    var score = $el.parent().next(".star_score");
                    switch (index) {
                        case 0:
                            score.html('1 分');
                            break;
                        case 1:
                            score.html('2 分');
                            break;
                        case 2:
                            score.html('3 分');
                            break;
                        case 3:
                            score.html('4 分');
                            break;
                        case 4:
                            score.html('5 分');
                            break;
                    }
                }
            });
            $(".star_bar_score2").starScore({
                onchange: function($el,index) {}
            });
            
        })
    </script>
</body>

</html>